{% extends "user.html.twig" %}
{% block title %}DASHBOARD | PATIENT{% endblock %}
{% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('styles/user.css') }}">
{% endblock %}
{% block body %}
    <div class="dashboard-user">
        <div class="cards">
            <a style="text-decoration: none;" href="{{ path('users.medicament') }}" class="card blue">
                <h3>Médicaments</h3>
                <p>{{ medicaments }}</p>
                <span>Voir les médicaments</span>
            </a>
            <a style="text-decoration: none;" href="{{ path('users.categories') }}" class="card light-blue">
                <h3>Catégories</h3>
                <p>{{ categories }}</p>
                <span>Voir les catégories</span>
            </a>
            <a style="text-decoration: none;" href="{{ path('users.purchases.index') }}" class="card green">
                <h3>Mes Achats</h3>
                <i style="color:white">Les 5 derniers achats :</i>
                <p class="fw-bolder">{{ total | number_format(0, ',', ' ') }} FCFA</p>
                <span>Voir mes achats</span>
            </a>
            <a style="text-decoration: none;" href="{{ path('users.cart.view') }}" class="card light-blue">
                <h3>Panier</h3>
                <p>Voir votre panier</p>
                <span>Gérer le panier</span>
            </a>
        </div>
        <div class="table-data">
            <div class="order">
                <div class="head">
                    <h3>Achats récents</h3>
                    <i class='bx bx-search'></i>
                    <i class='bx bx-filter'></i>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Total</th>
                            <th>Statut</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for purchase in purchases %}
                            <tr>
                                <td>{{ purchase.createdAt | date('Y-m-d') }}</td>
                                <td>{{ purchase.total | number_format(0, ',', ' ') }} FCFA</td>
                                <td><span class="status pending">Complété</span></td>
                                <td><a class="btn btn-sm btn-primary" href="{{ path('users.purchases.show', {id: purchase.id}) }}">Détails</a></td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
{% endblock %}
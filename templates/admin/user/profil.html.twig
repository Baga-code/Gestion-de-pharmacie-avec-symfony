{# templates/admin/user/profil.html.twig #}

{% extends "admin.html.twig" %}
{% block title %}{{ user.nom }} Profil {% endblock %}
{% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('styles/profil.css') }}">
    <link rel="stylesheet" href="{{ asset('styles/content.css') }}">
{% endblock %}

{% block body %}
<div class="profil">
    <div class="profile-card">
        <div class="profile-content">
            {# Affichage de l’image #}
            {% if user.image %}
                <img src="/image/users/{{ user.image }}" alt="Photo de profil" class="profile-pic">
            {% else %}
                <img src="/image/users/default.jpg" alt="Photo par défaut" class="profile-pic">
            {% endif %}

            <h2>{{ user.nom }} {{ user.prenom }}</h2>
            <p><strong>Adresse :</strong> {{ user.adresse }}</p>
            <p>
                <strong class="{{ 'ROLE_ADMIN' in user.roles ? 'label-admin' : 'label-user' }}">
                    {{ 'ROLE_ADMIN' in user.roles ? 'Administrateur' : 'Patient' }}
                </strong>
            </p>

            <div class="profile-stats">
                <div>
                    <span>Téléphone</span>
                    <p>(+226) {{ user.telephone }}</p>
                </div>
                <div>
                    <span>Email</span>
                    <p>{{ user.email }}</p>
                </div>
            </div>

            {# Bouton Éditer : visible si c’est votre profil OU si vous êtes admin et la cible n’est pas admin #}
            {% if
                ( 'ROLE_ADMIN' in app.user.roles and not ('ROLE_ADMIN' in user.roles) )
                or (app.user.id == user.id)
            %}
                <a href="{{ path('admin.users.edit', {id: user.id}) }}" class="show-more">Éditer</a>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
